## 다 쓴 객체 참조를 해제하라

객체 참조를 다 썻다는것은 다시는 쓰지않을 참조를 뜻한다.

여기서 Stack에 대한 Case가 나온다.

### 다 쓴 참조에 대한 명시적 null: Stack

Stack의 경우 내부적으로 `Object[]`을 관리한다.

즉, 논리적으로 배열의 길이 중 일부를 활성영역, 나머지를 비활성 영역으로 분리할 뿐, GC입장에서는 이게 회수해도 되는지 알 겨를이 없다.

그래서 Stack과 같이 내부 논리적인 메모리를 가지는 클래스의 경우 메모리 누수에 주의 해야한다.

### 캐시를 구현하기 좋은 WeekHashMap

<a href="https://jangjjolkit.tistory.com/31">객체의 참조</a>

기존의 HashMap을 사용하여 캐시를 구현하면 더이상 참조되지 않는 key에 대해서 제거해야한다.

아니면 해당 key에 대해서 유효정책을 걸어야 하지만 이는 정의하기 어렵다.

물론 null을 심었다고 나중에 GC 대상이 되는건 맞지만, Soft Reference의 경우에는 null이어도 참조하지 못할 뿐 GC대상이 곧바로 되진 않는다.

하지만 Week의 경우 null을 심어서 참조를 못하게 끊으면, 곧바로 다음 GC대상이 된다.

